# Xï¼ˆæ—§Twitterï¼‰æŠ•ç¨¿ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ ä»•æ§˜æ›¸

<img width="1268" height="576" alt="image" src="https://github.com/user-attachments/assets/b4c61332-7b81-4eae-9a09-34750804e956" />


## 1. æ¦‚è¦

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ **Laravel 12** ã‚’ç”¨ã„ã¦æ§‹ç¯‰ã•ã‚ŒãŸã€Xï¼ˆæ—§Twitterï¼‰ã¸ã®æŠ•ç¨¿ã‚’ç®¡ç†ãƒ»å®Ÿè¡Œã™ã‚‹ãŸã‚ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚èªè¨¼ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢ã‹ã‚‰ã€ãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿ãŠã‚ˆã³ç”»åƒä»˜ãæŠ•ç¨¿ï¼ˆæœ€å¤§4ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’å³æ™‚ã¾ãŸã¯äºˆç´„ã—ã¦è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚

X APIã¨ã®é€£æºã«ã¯ **twitteroauth ãƒ©ã‚¤ãƒ–ãƒ©ãƒª** ã‚’ä½¿ç”¨ã—ã€ã‚ã‚‰ã‹ã˜ã‚è¨­å®šã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”¨ã„ã¦å›ºå®šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸æŠ•ç¨¿ã‚’è¡Œã†ã€‚

---

## 2. ç›®çš„

- ç®¡ç†ç”»é¢ã‹ã‚‰Xã¸ã®æŠ•ç¨¿ã‚’ç°¡å˜ã«è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹
- ç”»åƒä»˜ãæŠ•ç¨¿ï¼ˆæœ€å¤§4æžšï¼‰ã«å¯¾å¿œã™ã‚‹
- Laravelæ¨™æº–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã«ã‚ˆã‚Šç®¡ç†æ©Ÿèƒ½ã‚’ä¿è­·ã™ã‚‹
- äºˆç´„æŠ•ç¨¿æ©Ÿèƒ½ã«ã‚ˆã‚Šã€å°†æ¥ã®ç‰¹å®šã®æ—¥æ™‚ã«è‡ªå‹•æŠ•ç¨¿ã•ã‚Œã‚‹ä»•çµ„ã¿ã‚’æä¾›ã™ã‚‹

---

## 3. ä½¿ç”¨æŠ€è¡“

| é …ç›®            | å†…å®¹                                   |
| :-------------- | :------------------------------------- |
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯  | Laravel 12.0                           |
| è¨€èªž            | PHP 8.2ä»¥ä¸Š                            |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰  | Blade + CSS (Tailwind CSS ç­‰)          |
| å¤–éƒ¨API         | X API v2 (ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¯ v1.1) |
| APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | abraham/twitteroauth                   |
| èªè¨¼            | Laravelæ¨™æº–èªè¨¼ (Email/Password)       |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸      | Local Storage (publicãƒ‡ã‚£ã‚¹ã‚¯)         |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹    | SQLite / MySQL ç­‰                      |

---

## 4. æ©Ÿèƒ½ä¸€è¦§

### 4.1 èªè¨¼

- **ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ**: æ¨™æº–çš„ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹èªè¨¼ã€‚
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: `auth` ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«ã‚ˆã‚Šã€æœªèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶é™ã€‚

### 4.2 æŠ•ç¨¿æ©Ÿèƒ½

- **ãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿**: æœ€å¤§280æ–‡å­—ï¼ˆXã®åˆ¶é™ã«æº–æ‹ ï¼‰ã€‚
- **ç”»åƒæŠ•ç¨¿**: æœ€å¤§4æžšã¾ã§ã®è¤‡æ•°ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¯¾å¿œã€‚
  - å¯¾å¿œå½¢å¼: jpg, jpeg, png, webp
  - ã‚µã‚¤ã‚ºåˆ¶é™: 1ãƒ•ã‚¡ã‚¤ãƒ«æœ€å¤§5MB
- **å³æ™‚æŠ•ç¨¿**: ä¿å­˜å¾Œã€ç›´ã¡ã«ã‚­ãƒ¥ãƒ¼ï¼ˆJobï¼‰ã«æŠ•å…¥ã•ã‚ŒæŠ•ç¨¿ã•ã‚Œã‚‹ã€‚

### 4.3 äºˆç´„æŠ•ç¨¿

- **æ—¥æ™‚æŒ‡å®š**: `datetime-local` ã«ã‚ˆã‚‹è©³ç´°ãªæ™‚é–“æŒ‡å®šãŒå¯èƒ½ã€‚
- **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œ**: Laravel Scheduler ãŒæ¯Žåˆ†èµ·å‹•ã—ã€æŒ‡å®šæ™‚åˆ»ã‚’éŽãŽãŸæŠ•ç¨¿ã‚’é †æ¬¡å®Ÿè¡Œã€‚
- **äºˆç´„ç®¡ç†**: äºˆç´„ä¸­ã®æŠ•ç¨¿ä¸€è¦§è¡¨ç¤ºãŠã‚ˆã³ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®å‰Šé™¤æ©Ÿèƒ½ã€‚

---

## 5. ç”»é¢ä»•æ§˜

### 5.1 ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ (`/login`)

- ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã€‚

### 5.2 æŠ•ç¨¿ä½œæˆç”»é¢ (`/dashboard/x-post`)

- æŠ•ç¨¿ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢ã€‚
- ç”»åƒãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—/ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠžï¼ˆæœ€å¤§4æžšï¼‰ã€‚
- äºˆç´„æ—¥æ™‚æŒ‡å®šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€‚
- æŠ•ç¨¿ãƒœã‚¿ãƒ³ã€‚

### 5.3 äºˆç´„æŠ•ç¨¿ä¸€è¦§ (`/dashboard/x-post/scheduled`)

- äºˆç´„ä¸­ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒ `scheduled`ï¼‰ã®æŠ•ç¨¿ã‚’ä¸€è¦§è¡¨ç¤ºã€‚
- æŠ•ç¨¿å†…å®¹ã€ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€äºˆå®šæ—¥æ™‚ã®ç¢ºèªã€‚
- å‰Šé™¤ãƒœã‚¿ãƒ³ã«ã‚ˆã‚‹äºˆç´„ã®å–ã‚Šæ¶ˆã—ã€‚

---

## 6. APIãƒ»èªè¨¼ä»•æ§˜

### 6.1 X API è¨­å®š (`.env`)

äº‹å‰ã« X Developer Portal ã§å–å¾—ã—ãŸå›ºå®šãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã€‚

```env
X_API_KEY=your_api_key
X_API_SECRET=your_api_secret
X_ACCESS_TOKEN=your_access_token
X_ACCESS_TOKEN_SECRET=your_access_token_secret
```

### 6.2 èªè¨¼æ–¹å¼

- **OAuthèªå¯ãƒ•ãƒ­ãƒ¼ã¯ä½¿ç”¨ã—ãªã„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®é€£æºç”»é¢ã¯å®Ÿè£…ã›ãšã€ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã•ã‚ŒãŸå˜ä¸€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã®ã¿æŠ•ç¨¿ã™ã‚‹æ–¹å¼ã€‚

---

## 7. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã¨å‡¦ç†ãƒ•ãƒ­ãƒ¼

### 7.1 å³æ™‚æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰æŠ•ç¨¿å†…å®¹ã‚’é€ä¿¡ã€‚
2. ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŠã‚ˆã³ç”»åƒã®æ°¸ç¶šåŒ– (Storageä¿å­˜)ã€‚
3. `PostToXJob` ã‚’ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã€‚
4. Queue Worker ãŒ Job ã‚’å–å¾—ã—ã€X APIã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã€‚
5. æˆåŠŸæ™‚ã« DB ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ `posted` ã«æ›´æ–°ã€‚

### 7.2 äºˆç´„æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒäºˆç´„æ—¥æ™‚ã‚’æŒ‡å®šã—ã¦æŠ•ç¨¿å†…å®¹ã‚’é€ä¿¡ã€‚
2. DB ã« `status = 'scheduled'` ã§ä¿å­˜ã€‚
3. `x:dispatch-scheduled-posts` ã‚³ãƒžãƒ³ãƒ‰ãŒ 1åˆ†ã”ã¨ã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚
4. ç¾åœ¨æ™‚åˆ»ã‚’éŽãŽãŸ `scheduled` æŠ•ç¨¿ã‚’æŠ½å‡ºã—ã€`PostToXJob` ã‚’ãã‚Œãžã‚Œãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã€‚
5. ä»¥é™ã¯å³æ™‚æŠ•ç¨¿ã¨åŒæ§˜ã® Job å‡¦ç†ã€‚

---

## 8. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### `x_posts` ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ           | èª¬æ˜Ž                                    |
| :-------------- | :-------------------------------------- |
| `content`       | æŠ•ç¨¿ãƒ†ã‚­ã‚¹ãƒˆ                            |
| `images`        | ç”»åƒãƒ‘ã‚¹ã®JSONå½¢å¼ãƒªã‚¹ãƒˆ                |
| `scheduled_at`  | æŠ•ç¨¿äºˆå®šæ—¥æ™‚ (å³æ™‚æŠ•ç¨¿ã¯ null)          |
| `status`        | `scheduled`, `posted`, `failed`         |
| `error_message` | æŠ•ç¨¿å¤±æ•—æ™‚ã®APIã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç­‰ã‚’è¨˜éŒ² |

---

## 9. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒžãƒ³ãƒ‰

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
composer install
npm install && npm run build

# ç’°å¢ƒæ§‹ç¯‰
cp .env.example .env
php artisan key:generate
php artisan migrate
php artisan storage:link
```
#âž¡ï¸x-app/database/seeders/UserSeeder.php  
ðŸš¨ä¸Šè¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»»æ„ã®å€¤ã«å¤‰æ›´ã—ã¦ä¸‹è¨˜ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ä¸‹ã•ã„!!
```bash
php artisan db:seed
```

---

## 10. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã®è¨­å®š (cronç­‰)

äºˆç´„æŠ•ç¨¿ã‚’æ©Ÿèƒ½ã•ã›ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã® cron ã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

```bash
* * * * * cd /path-to-your-project && php artisan schedule:run && php artisan queue:work --stop-when-empty >> /dev/null 2>&1
```

---
